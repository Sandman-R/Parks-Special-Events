[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Parks Special Events",
    "section": "",
    "text": "1 Introduction\nNew York City has long been defined by its rhythm — a constant pulse shaped by festivals, community programs, pop-up installations, mobile services and countless small gatherings that animate parks across the five boroughs. When the COVID-19 pandemic arrived, this rhythm shifted dramatically. Some event types nearly disappeared, others surged, and attendance patterns changed as residents adapted to restrictions, distancing requirements, and new forms of outdoor activity.\nThis project explores how the “heartbeat” of NYC’s park events evolved during and after this disruption. By examining temporal cycles, categorical trends and spatial distributions of activity, we trace both the interruption caused by COVID-19 and the gradual return of urban vibrancy. Through ridge plots, alluvial diagrams, hexbin heatmaps, and spatial aggregations, we uncover how different event categories expanded or contracted, how attendance fluctuated across seasons, and how parks across the city absorbed shifting public behaviors. The goal is to understand not only when and where events happened, but also how NYC’s public-space culture adapted and re-emerged as the city recovered.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  Data",
    "section": "",
    "text": "2.1 Load Data\nThen we turned to NYC Open Data and identified the Parks Special Events dataset, published by the Department of Parks and Recreation (DPR). This dataset is available as a CSV file and is officially updated on a monthly basis, although the underlying records may change more frequently (approximately weekly). In addition, newly recorded events appear in the public portal with about a one-month delay.\nWe downloaded the data from: https://data.cityofnewyork.us/Recreation/Parks-Special-Events/6v4b-5gp4/about_data.\nCode\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(forcats)\nlibrary(lubridate)\nlibrary(stringr)\n\ndf &lt;- read.csv(\"Parks_Special_Events_20251027.csv\")\n\ndf &lt;- df |&gt;\n  filter(LocationType == \"Park\")\n\n# head(df)\nThe data set contains 20.8k rows and 13 columns. Its main dimensions include Unit, Date and Time, Borough, Location, Event Type, Category, Classification, Attendance, Audience and so on.\nTo enhance the spatial component of our analysis, we incorporated a second dataset from NYC Open Data: Parks Properties. This dataset provides detailed geographic boundaries for every park in the form of multipolygon.\nWe downloaded the data from: https://data.cityofnewyork.us/Recreation/Parks-Properties/enfh-gkve/about_data.\nCode\nparks &lt;- read.csv(\"Parks_Properties_20251209.csv\")\n\n# head(parks)\nBy linking park names across the two datasets, these geometries allow us to locate each event spatially and generate higher-resolution maps—such as centroid-based hexbin visualizations—that go beyond a coarse borough-level view.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.2 Missing value analysis",
    "text": "2.2 Missing value analysis\n\n\nCode\ntheme_edav &lt;- function(base_size = 14, base_family = \"Helvetica\") {\n  theme_minimal(base_size = base_size, base_family = base_family) +\n    theme(\n      panel.grid = element_blank(),\n      axis.line = element_line(color = \"black\", linewidth = 0.6),\n      axis.title = element_text(face = \"bold\"),\n      plot.title = element_text(face = \"bold\", size = base_size + 2),\n      \n      legend.key.height = unit(0.6, \"cm\"),\n      legend.key.width  = unit(0.6, \"cm\"),\n      legend.title = element_text(face = \"bold\"),\n      \n      panel.border = element_blank()\n    )\n}\n\ntheme_set(theme_edav())\n\n\n\n2.2.1 Unit, Event Type and Audience\n\n\nCode\nget_top5 &lt;- function(df, var_name, label_name){\n  df |&gt;\n    filter(!is.na(.data[[var_name]])) |&gt;\n    count(.data[[var_name]], name = \"n\") |&gt;\n    arrange(desc(n)) |&gt;\n    slice_head(n = 5) |&gt;\n    mutate(\n      item  = .data[[var_name]],\n      group = label_name\n    ) |&gt;\n    select(group, item, n)\n}\n\ndf_top_unit &lt;- get_top5(df, \"Unit\", \"Unit\")\ndf_top_event &lt;- get_top5(df, \"Event.Type\", \"Event Type\")\ndf_top_aud &lt;- get_top5(df, \"Audience\", \"Audience\")\n\ndf_top_all &lt;- bind_rows(df_top_unit, df_top_event, df_top_aud)\n\nggplot(df_top_all,\n       aes(x = reorder(item, n), y = n)) +\n  geom_col() +\n  coord_flip() +\n  facet_wrap(~ group, ncol = 1, scales = \"free_y\") +\n  labs(\n    title = \"Top 5 Categories in Units, EventTypes, Audience\",\n    x     = \"Category\",\n    y     = \"Count\"\n  ) +\n  theme_edav() +\n  theme(\n    axis.text.x  = element_blank(),    \n    axis.ticks.x = element_blank()     \n  )\n\n\n\n\n\n\n\n\n\nThis figure shows that Unit, Event Type, and especially Audience contain a large share of NA or blank values. Because so many records lack valid entries, the apparent counts are driven as much by missing data as by real patterns. As a result, these variables are not reliable enough to support substantive analysis in the rest of the project.\n\n\n2.2.2 Year\n\n\nCode\ndf_year_count &lt;- df |&gt;\n  mutate(year = year(mdy_hms(Date.and.Time))) |&gt;  \n  count(year, name = \"year_count\") |&gt;               \n  arrange(year_count)\n\nhead(df_year_count, 4)\n\n\n  year year_count\n1 2002          1\n2 2017         25\n3 2025        402\n4 2024        536\n\n\nThe year 2002 is clearly a data-entry error, as it is impossible for the dataset to contain only that single year. Likewise, the records for 2017 are too sparse to be considered reliable, so both years are removed from analysis.\n\n\n2.2.3 Category\n\n\nCode\ndf_cat_counts &lt;- df |&gt;\n  mutate(\n    value_clean = case_when(\n      is.na(Category) |\n        str_trim(Category) == \"\" |\n        Category == \"--None--\" ~ \"(NA / None)\",\n      TRUE ~ Category\n    )\n  ) |&gt;\n  count(value_clean, name = \"n\")\n\nnon_na_top &lt;- df_cat_counts |&gt;\n  filter(value_clean != \"(NA / None)\") |&gt;\n  arrange(desc(n)) |&gt;\n  slice_head(n = 5)\n\nnon_na_levels &lt;- non_na_top |&gt;\n  arrange(n) |&gt;\n  pull(value_clean)\n\nlevels_order &lt;- c(non_na_levels, \"(NA / None)\")\n\ndf_cat_top &lt;- df_cat_counts |&gt;\n  filter(value_clean %in% levels_order) |&gt;\n  mutate(\n    value_clean = factor(value_clean, levels = levels_order)\n  )\n\nggplot(df_cat_top,\n       aes(x = value_clean, y = n)) +\n  geom_col() +\n  coord_flip() +\n  labs(\n    title = \"Category Distribution\",\n    x     = \"Category\",\n    y     = \"Count\"\n  ) +\n  theme_edav() +\n  theme(\n    axis.text.x  = element_blank(),\n    axis.ticks.x = element_blank()\n  )\n\n\n\n\n\n\n\n\n\nThe distribution plot shows that the number of missing or blank entries in Category is extremely small. Because nearly all events are assigned a valid category, this variable can be considered reliable and suitable for use in the subsequent analysis.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#summary",
    "href": "data.html#summary",
    "title": "2  Data",
    "section": "2.3 Summary",
    "text": "2.3 Summary\nGiven the overall data quality and the analytic goals of this project, the study will primarily rely on a set of variables that are both consistently recorded and conceptually meaningful. These include Date and Time, which anchor the temporal patterns; Borough, which provides spatial context; and Category together with Classification, which describe the nature and content of each event. Attendance is also retained as an important indicator of public engagement.\nTogether, these variables offer a stable and interpretable foundation for uncovering the rhythms and dynamics of NYC park events.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3  Result",
    "section": "",
    "text": "3.1 Preprocessing\nCode\ntheme_edav &lt;- function(base_size = 14, base_family = \"Helvetica\") {\n  theme_minimal(base_size = base_size, base_family = base_family) +\n    theme(\n      panel.grid = element_blank(),\n      axis.line = element_line(color = \"black\", linewidth = 0.6),\n      axis.title = element_text(face = \"bold\"),\n      plot.title = element_text(face = \"bold\", size = base_size + 2),\n      \n      legend.key.height = unit(0.6, \"cm\"),\n      legend.key.width  = unit(0.6, \"cm\"),\n      legend.title = element_text(face = \"bold\"),\n      \n      panel.border = element_blank()\n    )\n}\n\ntheme_set(theme_edav())\n\noptions(tigris_use_cache = TRUE)\n\nny_counties &lt;- counties(state = \"NY\", cb = TRUE, year = 2020) |&gt;\n  st_transform(4326)\n\nnyc_outline &lt;- ny_counties |&gt;\n  filter(NAME %in% c(\"New York\", \"Kings\", \"Queens\", \"Bronx\", \"Richmond\"))\n\ndf &lt;- df |&gt;\n  mutate(\n    datetime = mdy_hms(Date.and.Time),\n    year     = year(datetime),\n    month    = month(datetime, label = TRUE, abbr = TRUE),  \n    dow      = wday(datetime, label = TRUE, abbr = TRUE),    \n    hour     = hour(datetime),\n    doy      = yday(datetime),\n    Attendance_num = parse_number(as.character(Attendance)),\n    Attendance_num = ifelse(Attendance_num &lt; 0, NA, Attendance_num)\n  ) |&gt;\n  filter(year != 2002 & year != 2017 & LocationType == \"Park\") |&gt;\n  mutate(\n    park_clean = Location |&gt;\n      tolower() |&gt;                \n      str_replace_all(\"[^a-z0-9 ]\", \" \") |&gt;  \n      str_squish()                \n  )\n\n# head(df)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Result</span>"
    ]
  },
  {
    "objectID": "results.html#barplot",
    "href": "results.html#barplot",
    "title": "3  Result",
    "section": "3.2 Barplot",
    "text": "3.2 Barplot\n\n\nCode\nevents_by_month &lt;- df |&gt;\n  count(month, name = \"n\") |&gt;\n  arrange(month)\n\nggplot(events_by_month, aes(x = month, y = n)) +\n  geom_col() +\n  labs(\n    title = \"Number of Events by Month\",\n    x = \"Month\",\n    y = \"Number of Events\"\n  ) +\n  theme_edav()",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Result</span>"
    ]
  },
  {
    "objectID": "results.html#ridge",
    "href": "results.html#ridge",
    "title": "3  Result",
    "section": "3.3 Ridge",
    "text": "3.3 Ridge\n\n\nCode\ntop8_cat &lt;- df |&gt;\n  count(Category, sort = TRUE) |&gt;\n  slice_head(n = 8) |&gt;\n  pull(Category)\n\ndf_top &lt;- df |&gt;\n  filter(Category %in% top8_cat)\n\nggplot(df_top, aes(x = doy, y = Category, fill = Category)) +\n  geom_density_ridges(alpha = 0.7, scale = 1.5) +\n  labs(\n    title = \"Seasonal Distribution of Events by Category (Top 8)\",\n    x = \"Day of Year\",\n    y = \"Category\"\n  ) +\n  theme_edav()",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Result</span>"
    ]
  },
  {
    "objectID": "results.html#hex-heatmap",
    "href": "results.html#hex-heatmap",
    "title": "3  Result",
    "section": "3.4 Hex Heatmap",
    "text": "3.4 Hex Heatmap\n\n\nCode\ndf_hex &lt;- df |&gt;\n  filter(!is.na(Attendance_num), !is.na(doy)) |&gt;\n  mutate(\n    Attendance_capped = pmin(\n      Attendance_num,\n      quantile(Attendance_num, 0.99, na.rm = TRUE)\n    )\n  )\n\nggplot(df_hex, aes(x = doy, y = Attendance_capped)) +\n  geom_hex(bins = 20, color = NA) +\n  scale_y_log10() +\n  scale_fill_gradientn(\n  colours = c(\"#e0f3f8\", \"#abd9e9\", \"#74add1\", \"#4575b4\", \"#313695\"),\n  # trans   = \"log10\",\n  name    = \"Count\"\n) +\n  labs(\n    title = \"Attendance vs Day-of-Year\",\n    x = \"Day of Year\",\n    y = \"Attendance\",\n    fill = \"Count\"\n  )",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Result</span>"
    ]
  },
  {
    "objectID": "results.html#alluvial-1",
    "href": "results.html#alluvial-1",
    "title": "3  Result",
    "section": "3.5 Alluvial 1",
    "text": "3.5 Alluvial 1\n\n\nCode\ndf_year &lt;- df |&gt;\n  filter(!is.na(year), year &gt;= 2019, !is.na(Category))\n\ntop_cat &lt;- df_year |&gt;\n  count(Category, sort = TRUE) |&gt;\n  slice_head(n = 7) |&gt;\n  pull(Category)\n\ndf_year_filtered &lt;- df_year |&gt;\n  filter(Category %in% top_cat)\n\nsummary_df_year &lt;- df_year_filtered |&gt;\n  group_by(year, Category) |&gt;\n  summarise(\n    total_events = n(),\n    .groups = \"drop\"\n  ) |&gt;\n  mutate(\n    year     = factor(year),\n    Category = fct_infreq(Category)\n  )\n\n\n\n\nCode\nggplot(\n  summary_df_year,\n  aes(\n    x        = year,\n    stratum  = Category,\n    alluvium = Category,\n    y        = total_events,\n    fill     = Category\n  )\n) +\n  geom_flow(\n    stat          = \"alluvium\",\n    lode.guidance = \"frontback\",\n    color         = \"grey60\",\n    alpha         = 0.8\n  ) +\n  geom_stratum(width = 0.3, color = \"grey30\") +\n  scale_fill_brewer(palette = \"Set2\", name = \"Category\") +\n  labs(\n    title = \"NYC Event Categories Over Time\",\n    x     = \"Year\",\n    y     = \"Number of Events\"\n  ) +\n  theme_edav()",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Result</span>"
    ]
  },
  {
    "objectID": "results.html#alluvial-2",
    "href": "results.html#alluvial-2",
    "title": "3  Result",
    "section": "3.6 Alluvial 2",
    "text": "3.6 Alluvial 2\n\n\nCode\ndf_year &lt;- df |&gt;\n  filter(!is.na(year), year &gt;= 2019, !is.na(Category))\n\ntop_cat &lt;- df_year |&gt;\n  count(Category, sort = TRUE) |&gt;\n  slice_head(n = 7) |&gt;\n  pull(Category)\n\ndf_year_filtered &lt;- df_year |&gt;\n  filter(Category %in% top_cat)\n\nsummary_df_year_att &lt;- df_year_filtered |&gt;\n  group_by(year, Category) |&gt;\n  summarise(\n    total_attendance = sum(Attendance_num, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |&gt;\n  mutate(\n    year     = factor(year),\n    Category = fct_infreq(Category)\n  )\n\n\n\n\nCode\nggplot(\n  summary_df_year_att,\n  aes(\n    x        = year,\n    stratum  = Category,\n    alluvium = Category,\n    y        = total_attendance,\n    fill     = Category\n  )\n) +\n  geom_flow(\n    stat          = \"alluvium\",\n    lode.guidance = \"frontback\",\n    color         = \"grey60\",\n    alpha         = 0.8\n  ) +\n  geom_stratum(width = 0.3, color = \"grey30\") +\n  scale_fill_brewer(palette = \"Set2\", name = \"Category\") +\n  labs(\n    title = \"NYC Event Categories by Total Attendance Over Time\",\n    x     = \"Year\",\n    y     = \"Total Attendance\"\n  ) +\n  theme_edav()",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Result</span>"
    ]
  },
  {
    "objectID": "results.html#stack-bar",
    "href": "results.html#stack-bar",
    "title": "3  Result",
    "section": "3.7 Stack Bar",
    "text": "3.7 Stack Bar\n\n\nCode\nmobile_df &lt;- df |&gt;\n  filter(Category == \"Mobile Unit\",\n         !is.na(Classification),\n    str_trim(Classification) != \"\" )\n\ntop_mobile_class &lt;- mobile_df |&gt;\n  count(Classification, sort = TRUE) |&gt;\n  slice_head(n = 10) |&gt;\n  pull(Classification)\n\nmobile_year_class &lt;- mobile_df |&gt;\n  filter(Classification %in% top_mobile_class) |&gt;\n  count(year, Classification, name = \"n\") |&gt;\n  filter(year &gt;= 2017) |&gt;\n  mutate(\n    year = factor(year),\n    Classification = fct_infreq(Classification)\n  )\n\nggplot(mobile_year_class,\n       aes(x = year, y = n, fill = Classification)) +\n  geom_col(position = \"fill\") +\n  scale_fill_brewer(palette = \"Set2\", name = \"Classification\") +\n  labs(\n    title = \"Mobile Unit Classification Trends Over Time\",\n    x     = \"Year\",\n    y     = \"Proportion\",\n    fill  = \"Classification\"\n  ) +\n  theme_edav()",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Result</span>"
    ]
  },
  {
    "objectID": "results.html#spatial",
    "href": "results.html#spatial",
    "title": "3  Result",
    "section": "3.8 Spatial",
    "text": "3.8 Spatial\n\n\nCode\nparks &lt;- parks |&gt;\n  mutate(\n    park_clean = NAME311 |&gt;      \n      tolower() |&gt;\n      str_replace_all(\"[^a-z0-9 ]\", \" \") |&gt;\n      str_squish()\n  )\n\ntheme_hex_small &lt;- function() {\n  theme_minimal(base_size = 8) +\n    theme(\n      axis.text  = element_blank(),\n      axis.title = element_blank(),\n      axis.ticks = element_blank(),\n      panel.grid = element_blank(),\n      plot.title = element_text(size = 10, face = \"bold\", hjust = 0.5),\n      legend.title = element_text(size = 8),\n      legend.text  = element_text(size = 7),\n      legend.key.height = unit(0.3, \"in\"),\n      legend.key.width  = unit(0.15, \"in\")\n    )\n}\n\nplot_hex_for_year &lt;- function(year_sel, pal) {\n\n  park_attendance_year &lt;- df |&gt;\n    filter(year == year_sel, !is.na(park_clean)) |&gt;\n    group_by(park_clean) |&gt;\n    summarise(total_attendance = sum(Attendance_num, na.rm = TRUE)) |&gt;\n    ungroup()\n\n  parks_joined_year &lt;- parks |&gt;\n    left_join(park_attendance_year, by = \"park_clean\") |&gt;\n    mutate(total_attendance = replace_na(total_attendance, 0))\n\n  parks_valid_year &lt;- parks_joined_year |&gt;\n    st_make_valid()\n\n  parks_pts_year &lt;- parks_valid_year |&gt;\n    st_centroid(of_largest_polygon = TRUE) |&gt;\n    mutate(\n      lon = st_coordinates(geometry)[, 1],\n      lat = st_coordinates(geometry)[, 2]\n    ) |&gt;\n    st_drop_geometry()\n\n  ggplot() +\n    stat_summary_hex(\n      data = parks_pts_year,\n      aes(x = lon, y = lat, z = total_attendance),\n      bins  = 20,\n      fun   = \"sum\",\n      color = NA\n    ) +\n    scale_fill_gradientn(\n      colours = pal,\n      name    = \"Total Attendance\"\n    ) +\n    geom_sf(\n      data      = nyc_outline,\n      fill      = NA,\n      color     = \"grey70\",\n      linewidth = 0.4\n    ) +\n    coord_sf() +\n    labs(\n      title = paste(\"NYC Events Attendance in\", year_sel),\n      x     = \"Longitude\",\n      y     = \"Latitude\"\n    ) +\n    theme_hex_small()\n}\n\n\n\n\nCode\npal_blue &lt;- c(\"#e0f3f8\", \"#abd9e9\", \"#74add1\", \"#4575b4\", \"#313695\")\npal_red  &lt;- c(\"#fee5d9\", \"#fcae91\", \"#fb6a4a\", \"#de2d26\", \"#a50f15\")\n\np2019 &lt;- plot_hex_for_year(2019, pal_blue)\np2020 &lt;- plot_hex_for_year(2020, pal_red)\np2021 &lt;- plot_hex_for_year(2021, pal_blue)\np2022 &lt;- plot_hex_for_year(2022, pal_blue)\n\n(p2019 + p2020) / (p2021 + p2022)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Result</span>"
    ]
  }
]